<!DOCTYPE html>
<html ng-app="app">
<head>
    <title>Connect four</title>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="styles/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles/vendor/bootstrap/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="styles/game.css">
    <link rel="stylesheet" href="styles/chatbox.css">
    <link rel="stylesheet" href="styles/lobbyGame.css">
    <link rel="stylesheet" href="styles/index.css">

    <!--vendors-->
    <script src="scripts/vendor/socketio/socket.io.js"></script>
    <script src="scripts/vendor/jquery/jquery-2.1.4.min.js"></script>
    <script src="http://cdn.jsdelivr.net/sockjs/1.0.1/sockjs.min.js"></script>
    <script src="scripts/vendor/bootstrap/bootstrap.js"></script>
    <script src="scripts/vendor/angular/angular.min.js"></script>
    <script src="scripts/vendor/angular/angular-route.min.js"></script>
    <script src="scripts/vendor/angular/angular-animate.js"></script>
    <script src="scripts/vendor/angular/angular-messages.js"></script>
    <script src="scripts/vendor/angular/ui-bootstrap-tpls-0.13.3.min.js"></script>
    <script src="scripts/vendor/sockjs/socks-0.3.4.js"></script>
    <script src="scripts/vendor/stompjs/stomp.js"></script>
    <script src="scripts/app.js"></script>
    <!--models-->
    <script src="scripts/models/Player.js"></script>
    <script src="scripts/models/Game.js"></script>
    <script src="scripts/models/PlayedGame.js"></script>
    <!--filters-->
    <script src="scripts/filters/offsetfilter.js"></script>
    <script src="scripts/filters/playerfilter.js"></script>
    <script src="scripts/filters/opengamesonlyfilter.js"></script>
    <!--services-->
    <script src="scripts/services/SocketFactory.js"></script>
    <script src="scripts/services/LobbyService.js"></script>
    <script src="scripts/services/UserService.js"></script>
    <script src="scripts/services/PlayedGamesService.js"></script>
    <script src="scripts/services/ChatboxService.js"></script>
    <script src="scripts/services/GameService.js"></script>
    <script src="scripts/services/WatchService.js"></script>
    <!--controllers-->
    <script src="scripts/controllers/HomeController.js"></script>
    <script src="scripts/controllers/ViewController.js"></script>
    <script src="scripts/controllers/NavigationController.js"></script>
    <script src="scripts/controllers/IndexController.js"></script>
    <script src="scripts/controllers/ChatboxController.js"></script>
    <script src="scripts/controllers/LeaderBoardController.js"></script>
    <script src="scripts/controllers/LobbyController.js"></script>
    <script src="scripts/controllers/LoginController.js"></script>
    <script src="scripts/controllers/NewGameController.js"></script>
    <script src="scripts/controllers/GameController.js"></script>
    <script src="scripts/controllers/WatchController.js"></script>
    <script src="scripts/controllers/LatestGamesController.js"></script>
    <script src="scripts/controllers/InfoWarningMessageController.js"></script>

    <script src="scripts/logout.js"></script>
</head>
<body>
    <div class="container" ng-controller="HomeController">
        <div class="navigationDiv" ng-include="'views/menu.html'"></div>

        <!--TODO: maak directives van de warningmessage en infomessage-->
        <div ng-controller="InfoWarningMessageController">
            <div class="alert alert-danger" role="alert" ng-show="warning">
                {{warning}}
                <button class="pull-right" ng-click="closeWarning()">Close</button>
            </div>
            <div class="alert alert-info" role="alert" ng-show="info">
                {{info}}
                <button class="pull-right" ng-click="closeInfo()">Close</button>
            </div>
        </div>

        <div class="contentDiv" ng-controller="IndexController">
            <div class="gameDiv" ng-controller="ViewController" ng-view></div>
            <!--TODO: maak directives van het leaderbord en de latest games-->
            <div class="leaderboardDiv" ng-controller="LeaderBoardController">
                <h3>Leaderboards</h3>
                <label>Search for player: </label>
                <input ng-model="searchText" type="text">
                <pagination total-items="(players | filter:{name:searchText}).length" items-per-page="itemsPerPage" ng-model="currentPage" max-size="maxSize" class="pagination-sm" boundary-links="true"></pagination>
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <td>Username</td>
                        <td>Ranking Points</td>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="player in players | filter:{name:searchText} | orderBy:'-points' | offset: (currentPage-1)*itemsPerPage | limitTo: itemsPerPage">
                        <td>{{player.name}}</td>
                        <td>{{player.points}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="latestGamesDiv" ng-controller = "LatestGamesController">
                <h3>Latest Games</h3>
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <td>Player 1</td>
                        <td>Player 2</td>
                        <td>Winner</td>
                        <td>Rated</td>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="game in latestGames">
                        <td>{{game.player1}}</td>
                        <td>{{game.player2}}</td>
                        <td>{{game.winner || "Draw"}}</td>
                        <td>{{game.rated}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!--TODO: maak directives van de chatbox, chatterslist en de chatters-->
        <div class="chatDiv">
            <div id="chatbox">
                <aside>
                    <div id="usersHeader">Users</div>
                    <ul id="connectedUsersList">
                        <li class="connectedUser" ng-repeat="user in connectedUsers" ng-click="openPrivateChat(user)">{{user.username}}</li>
                    </ul>
                </aside>
                <section id="textbox">
                    <!--TODO: zet hier een tabset boven, zie angular UI bootstrap-->
                    <ul class="messages">
                        <!--TODO: pas settings hier aan zodat de messages uit de tab-messages worden opgehaald-->
                        <li class="message" ng-repeat="message in messages">
                            <div class="loggingMessage" ng-if="message.logging">
                                <span class="usernameLogMessage">{{message.user}}</span> {{message.message}}
                            </div>
                            <div ng-if="!message.logging">
                                <span class="usernameMessage">{{message.sender}}</span> {{message.message}}
                            </div>
                        </li>
                    </ul>
                </section>
                <section id="inputbar">
                    <form ng-submit="sendMessage()">
                        <input class="form-control" id="textinput" type="text" ng-model="textInput">
                        <input class="btn btn-primary" type="submit" value="Send">
                    </form>
                </section>
            </div>
        </div>
    </div>
</body>
</html>